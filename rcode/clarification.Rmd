##  DATA CLARIFICATION
##
##  Input: cpu-clean.csv
##  Output: None
##
##
##  Description:
##
##  Caveats:
##
##  NK
##  ---









PART I. OVERVIEW OF THE FEATURES

LOADING PACKAGES & IMPORTING DATA
```{r}
pacman::p_load(
  rio,     # for imports & exports
  ggplot2, # for plots
  zoo      # for year-quarter formats
)
##  IMPORT THE DATA
setwd("/Users/admin/Desktop/_probability_PROJECT/btlprob/rcode")   # set working directory
data <- import("cpu-clean.csv")        # rio::import
```

CATEGORIAL PIES
```{r}
# Config market pie
freq = as.vector(table(data$market))
levels = levels(factor(data$market))
title = "market"
```

```{r}
# Config status pie
freq = as.vector(table(data$status))
levels = levels(factor(data$status))
title = "status"
```

```{r}
# Drawing the pie
# Calculate the vector of percentages
percentages <- round(
  100 * freq / sum(freq), 
  1
  )

# Create the data frame of levels, frequency of values, and percentages
data_percentages <- data.frame(
  market = levels, 
  value = freq, 
  percent = percentages
  )

# Create a pie chart with percentages
ggplot(
  data_percentages, 
  aes(x="", y=value, fill=market)) +
  geom_bar(stat="identity", width=1, color="white") + # Draw the bar
  coord_polar(theta = "y") +               # Representing the values in polar
                                           # coordinate. Instead of stacked bars
  # Add labels (percentage numbers)
  geom_text(
    aes(label = paste0(percent, "%")),     # Concat 'percent' + '%'
    position = position_stack(vjust = 0.5) # Each slide is a stack bar
                                           # Use position_stack to stack the labels
                                           # on each slide.
    ) +
  labs(fill = title) +
  theme_void()
```

Histogram of launch date
```{r}
ggplot(data, aes(x = ldate)) +
  geom_histogram(binwidth = 1, fill="deepskyblue") +
  labs(x = "Date", y = "Count")
```

Boxplot of Lithography
```{r}
ggplot(data, aes(x = market, y = litho)) +
  geom_boxplot(fill="deepskyblue") +
  labs(x = "Market", y = "Lithography (nm)")

summary(data$litho)
```

Histogram of Lithography
```{r}
ggplot(data, aes(x = ldate, y = litho)) +
  geom_histogram(binwidth = 1, fill="deepskyblue") +
  labs(x = "Market", y = "Lithography (nm)")
```

Boxplot of Recommended Price
```{r}
ggplot(data, aes(x = market, y = rprice)) +
  geom_boxplot(fill="deepskyblue") +
  labs(x = "Market", y = "Recommended Price ($)")
```

Scatter plot of ncore
```{r}
ggplot(data, aes(x = ldate, y = ncore)) + 
  geom_point()
```

Histogram of Base frequency
```{r}
ggplot(data, aes(x = bfreq)) +
  geom_histogram(binwidth = 0.1, fill="deepskyblue") +
  labs(x = "Base frequency (GHz)", y = "Count")
```

Histogram of Thermal Design Power
```{r}
ggplot(data, aes(x = market,y = tdp)) +
  geom_boxplot(fill="deepskyblue") +
  labs(x = "Market", y = "Thermal deisgn power (W)")

summary(data$tdp)
```

Histogram of Memmory Bandwith
Currently hidden in our report.
```{r}
ggplot(data, aes(y = memband)) +
  geom_boxplot(fill="deepskyblue") +
  labs(x = "Max Memory Bandwidth (GB/s)", y = "Count")

summary(data$memband)
```

Histogram of Temperature
```{r}
ggplot(data, aes(x = temp)) +
  geom_histogram(binwidth = 1, fill="deepskyblue") +
  labs(x = "Temperature (Â°C)", y = "Count")
```









PART 2. ANALYSIS OF FEATURES

ANOVA - two way [market & rprice ~ bfreq]

1. Clean the data: cutting the outliners
```{r}
# Clear rprice's NAs
data <- data[!is.na(data$rprice),]

# Check the quantile range -> choose if the suitable quantile so that the variance can be
# approximately the same.
probs <- c(0,0.05,0.5,0.95,1)
quantile(data$rprice, probs = probs)
hist(data$rprice) # See the histogram

# Cut the outliners (Which values)
data <- data[data$rprice < 5000, ]

# Which intervals??

# Check the variance of these intervals
var(...) ?????
```

2. Plot the markets
```{r}
ggplot(data, aes(x = market,y = bfreq)) +
  geom_boxplot(fill="deepskyblue") +
  labs(x = "Market", y = "Frequency (GHz)")
```
3. Plot Price range
```{r}

# Divide the intervals - Really important, they must have the same variance!
very_cheap <- data$rprice[data$rprice < 150]
cheap <- data$rprice[150 <= data$rprice & data$rprice < 450]
mid <- data$rprice[450 <= data$rprice & data$rprice < 800]
expensive <- data$rprice[700 <= data$rprice & data$rprice < 2500]




ggplot(data, aes(x = status,y = bfreq)) +
  geom_boxplot(fill="deepskyblue") +
  labs(x = "Price Segments", y = "Frequency (GHz)")

rm(very_cheap)
```




