##  DATA CLARIFICATION
##
##  Input: cpu-clean.csv
##  Output: None
##
##
##  Description:
##
##  Caveats:
##
##  NK
##  ---


LOADING PACKAGES & IMPORTING DATA
```{r}
pacman::p_load(
  rio,     # for imports & exports
  ggplot2, # for plots
  zoo      # for year-quarter formats
)
##  IMPORT THE DATA
setwd("/Users/admin/Desktop/_probability_PROJECT/btlprob/rcode")   # set working directory
data <- import("cpu-clean.csv")        # rio::import
```


CATEGORIAL PIES
```{r}
# Config market pie
freq = as.vector(table(data$market))
levels = levels(factor(data$market))
title = "market"
```

```{r}
# Config status pie
freq = as.vector(table(data$status))
levels = levels(factor(data$status))
title = "status"
```

```{r}
# Drawing the pie
# Calculate the vector of percentages
percentages <- round(
  100 * freq / sum(freq), 
  1
  )

# Create the data frame of levels, frequency of values, and percentages
data_percentages <- data.frame(
  market = levels, 
  value = freq, 
  percent = percentages
  )

# Create a pie chart with percentages
ggplot(
  data_percentages, 
  aes(x="", y=value, fill=market)) +
  geom_bar(stat="identity", width=1, color="white") + # Draw the bar
  coord_polar(theta = "y") +               # Representing the values in polar
                                           # coordinate. Instead of stacked bars
  # Add labels (percentage numbers)
  geom_text(
    aes(label = paste0(percent, "%")),     # Concat 'percent' + '%'
    position = position_stack(vjust = 0.5) # Each slide is a stack bar
                                           # Use position_stack to stack the labels
                                           # on each slide.
    ) +
  labs(fill = title) +
  theme_void()
```






Histogram of launch date
```{r}
ggplot(data, aes(x = ldate)) +
  geom_histogram(binwidth = 1, fill="deepskyblue") +
  labs(x = "Date", y = "Count")
```


Boxplot of Lithography
```{r}
ggplot(data, aes(y = litho)) +
  geom_boxplot(fill="deepskyblue") +
  labs(x = "Date", y = "Count")

summary(data$litho)
```


Histogram of Base frequency
```{r}
ggplot(data, aes(x = bfreq)) +
  geom_histogram(binwidth = 0.1, fill="deepskyblue") +
  labs(x = "Date", y = "Count")
```






Histogram of Base frequency
```{r}
ggplot(data, aes(x = tdp)) +
  geom_histogram(binwidth = 5, fill="deepskyblue") +
  labs(x = "Date", y = "Count")
```






# rprice for each market
# many outliners can be seen for each kind of market
# when analyzing them, we will perform further cleaning methods
```{r}
hist(data$rprice[data$market == "Mobile"])
hist(data$rprice[data$market == "Desktop"])
hist(data$rprice[data$market == "Embedded"])
hist(data$rprice[data$market == "Server"])
```

# ncore for each market
```{r}
hist(data$ncore[data$market == "Mobile"])
hist(data$ncore[data$market == "Desktop"])
hist(data$ncore[data$market == "Embedded"])
hist(data$ncore[data$market == "Server"])
```
# !!! POTENTIAL HYPOTHESIS TESTING BETWEEN nCore and rPrice : are they the same?



# nthread ~ ncore ??
# !!! POTENTIAL HYPOTHESIS TESTING BETWEEN : is the nthread = 2*ncore ???? is it dominant ???

# bfreq
# Does it follow the Normal distribution?
```{r}
hist(data$bfreq)
```

# tdp
# most cpu on the market has tdp value in the following range, a few exceptions can be seen.
```{r}
hist(data$tdp)
boxplot(data$tdp)
summary(data$tdp)
```





# memband
# the memband's variance is very low
```{r}
boxplot(data$memband)
```


# temp
```{r}
hist(data$temp)
```










PART 2. Relationship between features.






# ncore ~ ldate
# Increasing?
```{r}
plot(ncore ~ ldate, data=data)
```

# litho ~ ldate
# Decreasing, getting better?
```{r}
plot(litho ~ ldate, data=data)
```



# rprice ~ ldate (DEPRECATED - No clear trend)
```{r}
plot(rprice ~ ldate, data=data)
```


```{r}
table(factor(data$market))
```


